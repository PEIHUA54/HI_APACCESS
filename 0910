   該頁面尚有權限設定，無法刪除=>
應該改成該頁面已有權限設定，將會清除此頁面所有相關權限設定及按鈕設定，確定要刪除嗎?

   // 刪除頁面
   [HttpPost]
   public JsonResult DeleteFunction(string func_id , string sysID)
   {
       try
       {
           var service = GetAPService();
           if (!service.CanDeleteFunction(func_id))
           {
               return Json(new { success = false, message = "該頁面尚有權限設定，無法刪除" });
           }

           var result = service.DeleteFunction(func_id);
           if (result == null || !result.Contains("fail"))
           {
               return Json(new { success = true, message = "頁面刪除成功" });
           }
           else
           {
               return Json(new { success = false, message = "頁面刪除失敗：" + result });
           }
       }
       catch (Exception ex)
       {
           return Json(new { success = false, message = "刪除頁面發生錯誤：" + ex.Message });
       }
   }


        // 檢查頁面是否可以刪除
        public bool CanDeleteFunction(string func_id)
        {
            string sql = @"
            SELECT COUNT(*) as PermissionCount
            FROM [HI-AUTOS].[dbo].[AP_USER_FUNC_CONFIG] 
            WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID
            
            UNION ALL
            
            SELECT COUNT(*) as PermissionCount
            FROM [HI-AUTOS].[dbo].[AP_USER_RFUNC_CONFIG] 
            WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID
";

            List<SqlParameter> parameters = new List<SqlParameter>
        {
            new SqlParameter("@SYS_ID", _sysId),
            new SqlParameter("@FUNC_ID", func_id)
        };

            DataTable dt = SVS_DBmanager.QueryBySQL(sql, parameters);
            int totalCount = 0;
            foreach (DataRow row in dt.Rows)
            {
                totalCount += Convert.ToInt32(row["PermissionCount"]);
            }
            return totalCount == 0;
        }

        // 刪除頁面
        public string DeleteFunction(string func_id)
        {
            try
            {
                // 1. 刪除該頁面的所有按鈕定義
                string deleteButtonsSQL = @"
DELETE FROM [HI-AUTOS].[dbo].[AP_RFUNC]
WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID";

                List<SqlParameter> buttonsParameters = new List<SqlParameter>
                {
                    new SqlParameter("@SYS_ID", _sysId),
                    new SqlParameter("@FUNC_ID", func_id)
                };

                // 2. 刪除該頁面的按鈕權限設定
                string deleteButtonPermSQL = @"
    DELETE FROM [HI-AUTOS].[dbo].[AP_USER_RFUNC_CONFIG] 
    WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID";

                List<SqlParameter> buttonPermParameters = new List<SqlParameter>
                {
                    new SqlParameter("@SYS_ID", _sysId),
                    new SqlParameter("@FUNC_ID", func_id)
                };

                // 3. 刪除該頁面的頁面權限設定
                string deleteFuncPermSQL = @"
    DELETE FROM [HI-AUTOS].[dbo].[AP_USER_FUNC_CONFIG] 
    WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID";

                List<SqlParameter> funcPermParameters = new List<SqlParameter>
                {
                    new SqlParameter("@SYS_ID", _sysId),
                    new SqlParameter("@FUNC_ID", func_id)
                };

                // 4. 最後刪除頁面本身
                string deleteFuncSQL = @"
    DELETE FROM [HI-AUTOS].[dbo].[AP_FUNC] 
    WHERE [SYS_ID] = @SYS_ID AND [FUNC_ID] = @FUNC_ID";

                List<SqlParameter> funcParameters = new List<SqlParameter>
                {
                    new SqlParameter("@SYS_ID", _sysId),
                    new SqlParameter("@FUNC_ID", func_id)
                };

                // 依序執行刪除
                SVS_DBmanager.ExecuteSQL(deleteButtonsSQL, buttonsParameters);
                SVS_DBmanager.ExecuteSQL(deleteButtonPermSQL, buttonPermParameters);
                SVS_DBmanager.ExecuteSQL(deleteFuncPermSQL, funcPermParameters);
                return SVS_DBmanager.ExecuteSQL(deleteFuncSQL, funcParameters);
            }
            catch (Exception ex)
            {
                return "fail," + ex.Message;
            }
        }

JS:
        function deletePage(funcId, funcName) {
            if (confirm(`確定要刪除頁面 "${funcName}" 嗎？\n注意：這將同時刪除該頁面的所有按鈕定義！`)) {
                $.post('@Url.Action("DeleteFunction", "AP")', { func_id: funcId, sysID: currentSysID }, function (response) {
                    if (response.success) {
                        alert(response.message);

                        // 如果刪除的是當前選中的頁面，清空選擇
                        if (currentSelectedPage === funcId) {
                            currentSelectedPage = '';
                            $('#buttonList').html('<div class="no-data">請先選擇左側的頁面</div>');
                            $('#addButtonBtn').prop('disabled', true);
                            $('#buttonSection').removeClass('hide-add-button');
                        }

                        // 自動重新載入頁面列表
                        loadPages();
                    } else {
                        alert(response.message);
                    }
                });
            }
        }
