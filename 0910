éå¸¸å¥½ ğŸ‘
ç¾åœ¨æˆ‘å€‘å·²ç¶“å®Œæˆ åŠŸèƒ½ 1~5 çš„ DLL (Model + Factory + ä¸»é¡åˆ¥)ï¼Œæ¥ä¸‹ä¾†æˆ‘å¹«ä½ æ•´ç†ï¼š
	1.	æ¯å€‹åŠŸèƒ½çš„ç”¨é€”
	2.	æ¸¬è©¦ç”¨ Controller æ–¹æ³• (æ”¾åœ¨ POSFILE_APPLY å°ˆæ¡ˆ)
	3.	æ¸¬è©¦æµç¨‹ (æ€éº¼è·‘ã€æœƒå¾—åˆ°ä»€éº¼çµæœ)

â¸»

ğŸ“Œ åŠŸèƒ½èªªæ˜ (1~5)

ğŸ”¹ åŠŸèƒ½ 1ï¼šGetUserNameAndGroup
	â€¢	ç”¨é€”ï¼šæŸ¥è©¢ä½¿ç”¨è€…çš„åŸºæœ¬è³‡è¨Šèˆ‡ç¾¤çµ„æ¬Šé™ã€‚
	â€¢	è¼¸å…¥ï¼šSysIDã€UserADã€Environment
	â€¢	è¼¸å‡ºï¼šUserIDã€UserNameã€GroupIDã€GroupNameã€ParentGroupID[]ã€ChildGroupID[]ã€SensitiveDataAccessã€éƒ¨é–€ã€è·ç¨±
	â€¢	æƒ…å¢ƒï¼šç™»å…¥æ™‚ï¼Œç³»çµ±è¦çŸ¥é“ã€Œé€™å€‹äººæ˜¯èª°ã€åœ¨å“ªå€‹ç¾¤çµ„ã€æœ‰ä»€éº¼å±¤ç´šé—œä¿‚ã€ã€‚

â¸»

ğŸ”¹ åŠŸèƒ½ 2ï¼šGetGroupAllUser
	â€¢	ç”¨é€”ï¼šå–å¾—ç¾¤çµ„å…§çš„æ‰€æœ‰ä½¿ç”¨è€…æ¸…å–®ã€‚
	â€¢	è¼¸å…¥ï¼šSysIDã€GroupIDã€IsIncludeChildGroupsã€Environment
	â€¢	è¼¸å‡ºï¼šUserADList (ä¸€ä¸²ä½¿ç”¨è€…å¸³è™Ÿé™£åˆ—)
	â€¢	æƒ…å¢ƒï¼šä¾‹å¦‚å¯„é€šçŸ¥ã€é¡¯ç¤ºç¾¤çµ„æˆå“¡åˆ—è¡¨ï¼Œå¯ä»¥ç”¨é€™å€‹ API å…ˆæŠŠæ‰€æœ‰äººæŠ“å‡ºä¾†ã€‚

â¸»

ğŸ”¹ åŠŸèƒ½ 3ï¼šGetTree
	â€¢	ç”¨é€”ï¼šå–å¾—ç¾¤çµ„æœ‰æ¬Šé™çš„åŠŸèƒ½æ¸…å–® (æ¨¹ç‹€)ã€‚
	â€¢	è¼¸å…¥ï¼šSysIDã€GroupIDã€Environment
	â€¢	è¼¸å‡ºï¼šåŠŸèƒ½åˆ—è¡¨ (FuncID, FuncName, Controller, Action, Sort, ParentID, Level)
	â€¢	æƒ…å¢ƒï¼šç™»å…¥ç³»çµ±å¾Œï¼Œæ ¹æ“šç¾¤çµ„æ¬Šé™ï¼Œç”¢ç”Ÿå·¦é‚Šçš„ã€ŒåŠŸèƒ½é¸å–®ã€ã€‚

â¸»

ğŸ”¹ åŠŸèƒ½ 4ï¼šGetFuncBtn
	â€¢	ç”¨é€”ï¼šå–å¾—æŸåŠŸèƒ½é ç¾¤çµ„æœ‰æ¬Šé™çš„æŒ‰éˆ•æ¸…å–®ã€‚
	â€¢	è¼¸å…¥ï¼šSysIDã€GroupIDã€FuncIDã€Environment
	â€¢	è¼¸å‡ºï¼šæŒ‰éˆ•æ¸…å–® (BtnID, BtnName, Controller, Action, BtnLocation, BtnOnclick)
	â€¢	æƒ…å¢ƒï¼šä¾‹å¦‚é€²å…¥ã€Œå“¡å·¥æ¸…å–®ã€é é¢ï¼ŒAPI æœƒå›ã€Œæ–°å¢ã€ã€Œåˆªé™¤ã€ã€ŒåŒ¯å‡ºã€é€™äº›ç¾¤çµ„èƒ½çœ‹åˆ°çš„æŒ‰éˆ•ã€‚

â¸»

ğŸ”¹ åŠŸèƒ½ 5ï¼šCheckBtnEnabled
	â€¢	ç”¨é€”ï¼šç¢ºèªç¾¤çµ„æ˜¯å¦æœ‰æŸåŠŸèƒ½é ç‰¹å®šæŒ‰éˆ•çš„æ¬Šé™ã€‚
	â€¢	è¼¸å…¥ï¼šSysIDã€GroupIDã€FuncIDã€BtnIDã€Environment
	â€¢	è¼¸å‡ºï¼šResult (true / false)
	â€¢	æƒ…å¢ƒï¼šé€²åˆ°é é¢æ™‚ï¼Œå‰ç«¯è¦æ±ºå®šã€Œé€™å€‹æŒ‰éˆ•æ˜¯ enable é‚„æ˜¯ disableã€ã€‚

â¸»

ğŸ“Œ æ¸¬è©¦ç”¨ç¨‹å¼ç¢¼ (POSFILE_APPLY å°ˆæ¡ˆ)

Controllerï¼šAPController.cs

using System;
using System.Web.Mvc;
using HI_APACCESS_DLL_FRAMEWORK;
using Newtonsoft.Json;
using POSFILE_APPLY.Models;

namespace POSFILE_APPLY.Controllers
{
    public class APController : POSFILE_APPLYBaseController
    {
        // ===== åŠŸèƒ½1 æ¸¬è©¦ =====
        public ActionResult Test_UserInfo()
        {
            var req = new M_AP.GetUserNameAndGroupRequestModel
            {
                sys_id = "HI_POSIMG",
                user_ad = "3A001",
                environment = "TEST"
            };

            string json_input = JsonConvert.SerializeObject(req);
            string response = new APACCESS().GetUserNameAndGroup(json_input);
            var res = JsonConvert.DeserializeObject<M_AP.GetUserNameAndGroupResponseModel>(response);

            return Content($"<pre>{JsonConvert.SerializeObject(res, Formatting.Indented)}</pre>", "text/html");
        }

        // ===== åŠŸèƒ½2 æ¸¬è©¦ =====
        public ActionResult Test_GroupAllUser()
        {
            var req = new M_AP.GetGroupAllUserRequestModel
            {
                sys_id = "HI_POSIMG",
                group_id = "001",
                is_include_child = true,
                environment = "TEST"
            };

            string json_input = JsonConvert.SerializeObject(req);
            string response = new APACCESS().GetGroupAllUser(json_input);
            var res = JsonConvert.DeserializeObject<M_AP.GetGroupAllUserResponseModel>(response);

            return Content($"<pre>{JsonConvert.SerializeObject(res, Formatting.Indented)}</pre>", "text/html");
        }

        // ===== åŠŸèƒ½3 æ¸¬è©¦ =====
        public ActionResult Test_Tree()
        {
            var req = new M_AP.GetTreeRequestModel
            {
                sys_id = "HI_POSIMG",
                group_id = "001",
                environment = "TEST"
            };

            string json_input = JsonConvert.SerializeObject(req);
            string response = new APACCESS().GetTree(json_input);
            var res = JsonConvert.DeserializeObject<M_AP.GetTreeResponseModel>(response);

            return Content($"<pre>{JsonConvert.SerializeObject(res, Formatting.Indented)}</pre>", "text/html");
        }

        // ===== åŠŸèƒ½4 æ¸¬è©¦ =====
        public ActionResult Test_FuncBtn()
        {
            var req = new M_AP.GetFuncBtnRequestModel
            {
                sys_id = "HI_POSIMG",
                group_id = "001",
                func_id = "POS1001",
                environment = "TEST"
            };

            string json_input = JsonConvert.SerializeObject(req);
            string response = new APACCESS().GetFuncBtn(json_input);
            var res = JsonConvert.DeserializeObject<M_AP.GetFuncBtnResponseModel>(response);

            return Content($"<pre>{JsonConvert.SerializeObject(res, Formatting.Indented)}</pre>", "text/html");
        }

        // ===== åŠŸèƒ½5 æ¸¬è©¦ =====
        public ActionResult Test_CheckBtn()
        {
            var req = new M_AP.CheckBtnEnabledRequestModel
            {
                sys_id = "HI_POSIMG",
                group_id = "001",
                func_id = "POS1001",
                btn_id = "EDIT",
                environment = "TEST"
            };

            string json_input = JsonConvert.SerializeObject(req);
            string response = new APACCESS().CheckBtnEnabled(json_input);
            var res = JsonConvert.DeserializeObject<M_AP.CheckBtnEnabledResponseModel>(response);

            return Content($"<pre>{JsonConvert.SerializeObject(res, Formatting.Indented)}</pre>", "text/html");
        }
    }
}


â¸»

Modelsï¼šM_AP.cs (POSFILE_APPLY å°ˆæ¡ˆ)

using System.Collections.Generic;

namespace POSFILE_APPLY.Models
{
    public class M_AP
    {
        // ===== åŠŸèƒ½1 =====
        public class GetUserNameAndGroupRequestModel
        {
            public string sys_id { get; set; }
            public string user_ad { get; set; }
            public string environment { get; set; }
        }
        public class GetUserNameAndGroupResponseModel
        {
            public string code { get; set; }
            public string message { get; set; }
            public ResultData result { get; set; }
            public class ResultData
            {
                public string UserID { get; set; }
                public string UserName { get; set; }
                public string GroupID { get; set; }
                public string GroupName { get; set; }
                public List<string> ParentGroupID { get; set; }
                public List<string> ChildGroupID { get; set; }
                public bool SensitiveDataAccess { get; set; }
                public string OrganName { get; set; }
                public string PostName { get; set; }
            }
        }

        // ===== åŠŸèƒ½2 =====
        public class GetGroupAllUserRequestModel
        {
            public string sys_id { get; set; }
            public string group_id { get; set; }
            public bool is_include_child { get; set; }
            public string environment { get; set; }
        }
        public class GetGroupAllUserResponseModel
        {
            public string code { get; set; }
            public string message { get; set; }
            public ResultData result { get; set; }
            public class ResultData
            {
                public List<string> UserADList { get; set; }
            }
        }

        // ===== åŠŸèƒ½3 =====
        public class GetTreeRequestModel
        {
            public string sys_id { get; set; }
            public string group_id { get; set; }
            public string environment { get; set; }
        }
        public class GetTreeResponseModel
        {
            public string code { get; set; }
            public string message { get; set; }
            public List<ResultData> result { get; set; }
            public class ResultData
            {
                public string FuncID { get; set; }
                public string FuncName { get; set; }
                public string Controller { get; set; }
                public string Action { get; set; }
                public int Sort { get; set; }
                public string ParentID { get; set; }
                public string Level { get; set; }
            }
        }

        // ===== åŠŸèƒ½4 =====
        public class GetFuncBtnRequestModel
        {
            public string sys_id { get; set; }
            public string group_id { get; set; }
            public string func_id { get; set; }
            public string environment { get; set; }
        }
        public class GetFuncBtnResponseModel
        {
            public string code { get; set; }
            public string message { get; set; }
            public List<ResultData> result { get; set; }
            public class ResultData
            {
                public string BtnID { get; set; }
                public string BtnName { get; set; }
                public string Controller { get; set; }
                public string Action { get; set; }
                public string BtnLocation { get; set; }
                public string BtnOnclick { get; set; }
            }
        }

        // ===== åŠŸèƒ½5 =====
        public class CheckBtnEnabledRequestModel
        {
            public string sys_id { get; set; }
            public string group_id { get; set; }
            public string func_id { get; set; }
            public string btn_id { get; set; }
            public string environment { get; set; }
        }
        public class CheckBtnEnabledResponseModel
        {
            public bool Result { get; set; }
        }
    }
}


â¸»

ğŸ“Œ æ¸¬è©¦æµç¨‹
	1.	å•Ÿå‹•å°ˆæ¡ˆ (Visual Studio â†’ F5 â†’ IIS Express)
	2.	åœ¨ç€è¦½å™¨å‘¼å«ä¸åŒ URLï¼š
	â€¢	åŠŸèƒ½ 1 â†’ /AP/Test_UserInfo
	â€¢	åŠŸèƒ½ 2 â†’ /AP/Test_GroupAllUser
	â€¢	åŠŸèƒ½ 3 â†’ /AP/Test_Tree
	â€¢	åŠŸèƒ½ 4 â†’ /AP/Test_FuncBtn
	â€¢	åŠŸèƒ½ 5 â†’ /AP/Test_CheckBtn
	3.	è§€å¯Ÿå›å‚³ JSONï¼Œæœƒç›´æ¥è¼¸å‡ºåœ¨é é¢ <pre> å€å¡Šè£¡ã€‚

â¸»

è¦ä¸è¦æˆ‘å¹«ä½ æŠŠ åŠŸèƒ½ 6 çš„æ¸¬è©¦ç¨‹å¼ä¹Ÿæ•´åˆé€²ä¾†ï¼Œé€™æ¨£ä½ æ•´ä»½æ¸¬è©¦ Controller å°±èƒ½ä¸€æ¬¡é©—è­‰ 1~6ï¼Ÿ