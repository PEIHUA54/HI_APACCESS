SYSCONTROLLER: 
// 2. 權限設定頁面
 [HttpGet]
 public ActionResult SYS_PERMISSION_SET()
 {
     return View();
 }


 // 取得可維護系統選項(下拉選單用)
 [HttpPost]
 public JsonResult GetSystemOptions()
 {
     try
     {
         var options = F_SYS.GetMaintainableSystemOptions(Emp_NO);
         return Json(new { success = true, data = options });
     }
     catch (Exception ex)
     {
         return Json(new { success = false, message = "取得系統選項失敗：" + ex.Message });
     }
 }

 // 導向群組管理
 [HttpPost]
 public JsonResult RedirectToGroupManagement(string sysId,string groupId)
 {
     try
     {
         if (string.IsNullOrWhiteSpace(sysId))
         {
             return Json(new { success = false, message = "請選擇系統" });
         }

         // **驗證 sysId 格式（白名單）**
         if (!IsValidSystemId(sysId))
         {
             return Json(new { success = false, message = "無效的系統ID格式" });
         }

         // 更新Session
         Session["CurrentSystemId"] = sysId;
         Session["FromInternalSite"] = true;
         groupId = "001";

         return Json(new
         {
             success = true,
             sysId = sysId ,
             groupId = groupId 
         });
     }
     catch (Exception ex)
     {
         return Json(new { success = false, message = "導向失敗：" + ex.Message });
     }
 }

SYS_PERMISSION_SET:
   // 導向群組管理
   function goToGroupManagement() {
       var sysId = $('#systemSelect').val();
       var groupId = $('#systemSelect').val();

       if (!sysId) {
           alert('請選擇系統');
           return;
       }

       $.ajax({
           url: '@Url.Action("RedirectToGroupManagement", "SYS")',
           type: 'POST',
           data: { sysId: sysId, groupId: groupId },
           dataType: 'json',
           success: function (response) {
               if (response.success && response.sysId && response.groupId) {
                   // **修改：前端自行組裝 URL**
                   var baseUrl = '@Url.Action("GroupManagement", "AP")';
                   var safeUrl = baseUrl + '?systemId=' + encodeURIComponent(response.sysId) + '&groupId=' + encodeURIComponent(response.groupId);

                   window.location.href = safeUrl;
               } else {
                   alert(response.message || '導向失敗');
               }
           },
           error: function () {
               alert('導向時發生錯誤');
           }
       });
   }
